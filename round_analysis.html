<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Experimental PB on Mechanical Turk | Knapsack_7</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
    <script nonce="undefined" src="https://cdn.zingchart.com/zingchart.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <style>
        /* Custom CSS to color the borders black */
        
        .border-black {
            border: 1px solid black;
        }
        
        .nested {
            padding: 1rem;
        }
        
        .wrapper {
            padding: 0rem;
        }
        
        .spacer {
            padding: 1rem;
        }
        
        .carousel-control-prev-icon,
        .carousel-control-next-icon {
            font-size: 24px;
            /* Adjust the size as needed */
            color: black;
            /* Adjust the color as needed */
        }
        
        .carousel-inner {
            padding: 1rem;
            padding-left: 7rem;
            padding-right: 7rem;
        }
        
        .carousel-inner-pie {
            padding-top: 0.5rem;
            height: 400px;
        }
        
        .hidden-section {
            display: none;
        }
        
        .chord-wrapper {
            height: 100%;
        }
        
        #myChordChart {
            height: 100%;
            width: 100%;
        }
        
        #myBarChart1,
        #myStackedBarChart1 {
            height: 100%;
            width: 100%;
        }
        /* zing-grid[loading] {
            height: 800px;
            width: 100%;
        } */
        
        h1,
        h2,
        h3,
        h4,
        p {
            text-align: center;
        }

      
        main {
            padding-top: 100px; /* Adjust based on the actual height of your header */
            }

        .info-button {
            margin-top: 25px;
            /* padding-top: 100px; */
        }
    </style>
    <script>
    window.addEventListener('load', (event) => {
        console.log('The page has fully loaded');
        loadRound();
    });
    </script>
</head>

<body>
    <header>
        <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
          <a class="navbar-brand" href="./summary.html">Summary</a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav mr-auto">
              <li class="nav-item active">
                <a class="nav-link" href="./round_analysis.html">Round By Round <span class="sr-only">(current)</span></a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="">Pabutools</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="">MES</a>
              </li>
            </ul>
            <form class="form-inline mt-2 mt-md-0" data-dashlane-rid="586d21bb200ad9fc" data-form-type="">
              <input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search" data-dashlane-rid="ebb02837c4029767" data-form-type="">
              <button class="btn btn-outline-success my-2 my-sm-0" type="submit" data-dashlane-label="true" data-dashlane-rid="c66944f310795772" data-form-type="">Search</button>
            </form>
          </div>
        </nav>
    </header>

    <main role="main">
    
        <div class="container-fluid upper-page">
            <!-- General Explanations -->
            <div class="container">
                <div class="spacer-2"></div>
                <div class="spacer-2"></div>

                <div class="row mb-3">
                    <div class="col-12  justify-content-center">
                        <h1>
                            Experimental PB on Mechanical Turk | Knapsack_7
                        </h1>
                        <div class="spacer-1"><hr></div>
                        <p>
                            This is the round-by-round explanations for the results of this participatory budgeting election decided by the Method of Equal Shares (MES). For each round,
                            we provide visualisations to help you understand why each particular project was selected or not. The visualisations include effective vote counts, voter flows, and pie charts.
                            If you hover over the 'i' buttons, you will see more detailed explanations of each visualisation.
                        </p>
                    </div>
                </div>
                <div class="spacer-1"></div>
            </div>
        </div>
        <center>
            <div id="spinner" class="spinner-border" role="status">
                <span class="sr-only">Loading...</span>
            </div>
        </center>
        <div class="container">
                      
            <div class="col-12  justify-content-center">
                <h3>
                    Round  <span class="round_number"></span>
                </h3>
                <h4>
                    Winner - <span class="project_name"></span>
                </h4>
                <p>
                    <b>Description:</b> <span class="description"></span>
                    <br>
                    <b>Project Cost:</b> <span class="project_cost"></span>
                    <br>
                    <b>Election Budget Remaining:</b> <span class="budget_remaining"></span>
                </p>
               
                
                <p>
              
                    <a href="#" class="btn btn-secondary my-2">Previous Round</a>
                    <a href="#" class="btn btn-primary my-2">Next Round</a>

                </p>
            </div>
            <div class="row my-4 justify-content-center hidden-section" id="dropdown-container">
                <div>
                    <h4>Select Round:  </h4>
                </div>
                <div class="spacer-1"></div>
                <div class="spacer-1"></div>
                <div class="dropdown">
                    <button class="btn btn-primary dropdown-toggle" type="button" id="projectDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Round 1: Computers for the community learning center
                </button>
                    <div class="dropdown-menu" aria-labelledby="projectDropdown">
                    
                        <a id="dropdown-item-3" class="dropdown-item active" item="3" onclick="renderRound(3, this)">Round 1: 'Computers for the community learning center'</a>
                    
                        <a id="dropdown-item-14" class="dropdown-item " item="14" onclick="renderRound(14, this)">Round 2: 'Benches for a Walkable City'</a>
                    
                        <a id="dropdown-item-13" class="dropdown-item " item="13" onclick="renderRound(13, this)">Round 3: 'Real-Time Bus Arrival Monitors in bus stations'</a>
                    
                        <a id="dropdown-item-12" class="dropdown-item " item="12" onclick="renderRound(12, this)">Round 4: 'Separate Bike Lanes from Traffic'</a>
                    
                        <a id="dropdown-item-2" class="dropdown-item " item="2" onclick="renderRound(2, this)">Round 5: 'Little (book exchange) libraries'</a>
                    
                        <a id="dropdown-item-31" class="dropdown-item " item="31" onclick="renderRound(31, this)">Round 6: 'Fire Hydrant Markers'</a>
                    
                        <a id="dropdown-item-21" class="dropdown-item " item="21" onclick="renderRound(21, this)">Round 7: 'Planting trees in the city'</a>
                    
                        <a id="dropdown-item-23" class="dropdown-item " item="23" onclick="renderRound(23, this)">Round 8: '5 Water Bottle Refill Stations'</a>
                    
                        <a id="dropdown-item-15" class="dropdown-item " item="15" onclick="renderRound(15, this)">Round 9: 'Urban Bicycle Wash Stations'</a>
                    
    
                    </div>
                </div>
            </div>
        </div>




        <div class="container">
            <div class="spacer-1"></div>
            <hr>
            <div class="spacer-1"></div>
            <!-- Round specific visualisations -->
                <section>

                    <!-- Effective Vote Count -->
                    <div class="row featurette">
                        <div class="col-5">
                          <h2 class="featurette-heading">Effective Vote Count</h2>
                          <p class="lead">'<span class="project_name"></span>' has the highest effective vote count, as there is enough budget to support this project the project will recieve funding. 
                            This project costs <span class="project_cost"></span> .
                            <span class="project_votes"></span> people voted for this project, at the time the project was elected it had an effective vote count of <span class="effective_vote_count"></span>.     </p>
                        </div>
                        <div class="col-7" style="min-height: 400px;">
                            <div id="BarChart" style="height: 100%; width: 100%;">
                                <button class = "info-button" style = "position: absolute; z-index: 2000; right: 50px;" data-tippy-content= "<b>Effective Vote Count:</b><br> For a vote to count towards a project, the person who made the vote must have some of their budget remaining so they can contribute towards the project. Say Project A has 20 voters, but 5 of those 20 have already spent their entire budget on previous projects, the effective vote count will be 15. This graph shows the effective vote counts for all projects.">i</button>
                            </div>
                        </div>
                    </div>

                    <div class="spacer-1"></div>
                    <hr>
                    <div class="spacer-1"></div>

                    <!-- Sankey and Chord side by side -->
                    <div class="row" style="display: grid;">
                        <h5 style="text-align: center; font-weight: bold;">Voter Flows</h5>
                        <p>The following graphs demonstrate how voters of '<span class="project_name"></span>' voted for other projects, highlighting where funding may be lost for certain projects in future rounds as voters funds have been allocated to '<span class="project_name"></span>'. </p>
                    </div>
                    <div class="row">
                        <div class="col-5" style="display: grid;">
                            <div class="d-flex align-items-center justify-content-center">
                                <button class = "info-button" style = "position: absolute; z-index: 2000; left: 10px; top: 30px" data-tippy-content="<b>Sankey Diagram</b><br>The provided Sankey diagram offers a visual representation of voting patterns among a set of participants with the option to vote for multiple projects. The individual bands flowing from this singular left bar to various bars on the right-hand side illustrate the distribution of voters who have also voted for other projects. Each band's thickness corresponds to the number of voters who voted for both the project on the left and the project on the right. The graph is designed to show the overlap in voting behaviour, making it clear which projects share a common voter base with the project displayed on the right-hand side.">i</button>
                                <div id="SankeyChart">

                                </div>
                            </div>
                        </div>

                        <div class="col-2"></div>
                        <div class="col-5 chord-wrapper">
                            <button class = "info-button" style = "position: absolute; z-index: 2000; right: 10px; top: 30px" data-tippy-content="<b>Chord Diagram:</b><br> The chord diagram shows the voter flows between the project selected this round. Due to the nature of MES, if a project is selected, the voters who voted for it will have a reduction in their budget. Therefore, showing how voters’ voted shows which other projects will have had their support cut.">i</button>
                            <div id='ChordChart'></div>

                        </div>
                    </div>
                    <div class="spacer-1"></div>
                    <hr>
                    <div class="spacer-1"></div>

                    <!-- Pie Charts Carousels -->
                    <div id="secondCarousel" style="height: 500px; width: 100%;" class="carousel slide" data-ride="carousel" data-interval="false">
                        <button class = "info-button" style = "position: absolute; z-index: 2000; right: 30px; top: 30px" data-tippy-content="<b>Pie Chart:</b><br> TODO">i</button>
                            
                        <div id="pieChartsCarousel" class="carousel-inner" style="height: 500px; width: calc(100% - 40px);" >
                        </div>

                        <a class="carousel-control-prev" href="#secondCarousel" role="button" data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                          </a>
                          <a class="carousel-control-next" href="#secondCarousel" role="button" data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                          </a>
                    </div>



                    <div class="spacer-1"></div>
                    <hr>
                    <div class="spacer-1"></div>

                    <!-- Reduced Effective Vote Count Graph (Centred Div) -->
                    <div class="row featurette">
                        <div class="col-5">
                          <h2 class="featurette-heading">Reduced Effective Vote Count</h2>
                          <p class="lead">Donec ullamcorper nulla non metus auctor fringilla. Vestibulum id ligula porta felis euismod semper. Praesent commodo cursus magna, vel scelerisque nisl consectetur. Fusce dapibus, tellus ac cursus commodo.</p>
                        </div>
                        <div class="col-7" style="min-height: 400px;">
                            <div id="StackedBarChart" style="height: 100%; width: 100%;" >
                                <button class = "info-button" style = "position: absolute; z-index: 2000; right: 50px;" data-tippy-content= "<b>Reduced Effective Vote Count</b><br>Voters who still have money left but not enough money to pay for the project when its cost is equally divided will count as a fraction. We do not count voters if they have already spent their entire budget share. This graph visualises the current vote count after some of the voters' budgets have already been allocated against original vote count for the project.">i</button>
                            </div>
                        </div>
                    </div>
                </section>
        </div>

        <div class="spacer-1"></div>
        <hr>
        <div class="spacer-1"></div>

        <!-- FOOTER -->
        <footer class="container">
            <p>© Pabutools. · <a href="https://getbootstrap.com/docs/4.0/examples/carousel/#">Privacy</a> · <a href="https://getbootstrap.com/docs/4.0/examples/carousel/#">Terms</a></p>
        </footer>

    </main>
    <!-- Bootstrap JS and its dependencies -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <!-- Effective vote count bar chart -->
    <script>
        zingchart.render({
            id: 'BarChart',
            data: {
            "type": "hbar",
            "title": {
                "text": "Effective Vote Count",
            "fontSize": 16, // Smaller font size to ensure it fits
            "adjustLayout": true // ZingChart will try to adjust the layout 
            },
            "plotarea": {
            "marginLeft":'dynamic',
            "marginRight":'dynamic'
        },
            "scaleX": {
            "labels": [], // Label that identifies each project in the round
                "title": {
                "text": "Project"
                },
                "item": { // Explicitly control the appearance of the scale labels
                "font-size": 14, // Adjust font size as needed
                "offset-x": 0, // Adjust to move the label left or right if needed
                "offset-y": 0 // Adjust to move the label up or down if needed
                },"zooming": true,
            "zoomTo": [0, 10],
            "mirrored": true,
            },


            "scaleY": {
                "title": {
                "text": "Number of Votes"
                },
                "items-overlap": true,
            },

            "scrollX": {
                "bar": {
                "backgroundColor": '#2596be',
                "alpha": 0.5,
                },
                "handle": {
                "backgroundColor": '#2596be',
                },
            },
            "series": [{
                "values": [], // Current votes values
                'hover-state': { /* Hover object */
                'background-color': "orange",
            }
            }, ],
            "plot": {
            "tooltip": {
                "text": "Project %scale-key-label has %v votes"
            },
                "animation": {
                "effect": "ANIMATION_SLIDE_BOTTOM",
                "sequence": "ANIMATION_BY_PLOT_AND_NODE",
                "speed": 0
                }
            }
        },
        height: '100%',
        width: '100%'
    });
    </script>
    <!-- Effective vote count reduction bar chart -->
    <script>

    zingchart.render({
        id: 'StackedBarChart',
        data: {
        "type": "hbar",
        "stacked": true,
        "title": {
            "text": "Reduced Effective Vote Count",
            "fontSize": 15, // Smaller font size to ensure it fits
            "adjustLayout": true // ZingChart will try to adjust the layout 
        },
        "legend": {
            "layout": "x4",
            "background-color": "none",
            "shadow": 0,
            "align": "center",
            "adjust-layout": true,
            "item": {
                "font-color": "#333"
            },
            "marker": {
                "type": "square",
                "border-width": 0,
                "size": 5
            },
            "toggle-action": "remove",
            "adjust-layout": true,
        },
        "plotarea": {
            "marginLeft":'dynamic',
            "marginRight":'dynamic'
        },
        "plot": {
            "tooltip": {
                "text": "Project %scale-key-label has %v votes"
            },
            "animation": {
                "effect": "ANIMATION_SLIDE_BOTTOM",
                "sequence": 1,
                "speed": 0
            }
        },
        "scale-x": {
            "labels": [], // Label that identifies each project in the round
            "title": {
                "text": "Projects"
            },
            "item": { // Explicitly control the appearance of the scale labels
                    "font-size": 14, // Adjust font size as needed
                    "offset-x": 0, // Adjust to move the label left or right if needed
                    "offset-y": 0 // Adjust to move the label up or down if needed
                },"zooming": true,
            "zoomTo": [0, 6]
        },
        "scale-y": {
            "title": {
                "text": "Votes"
            },
            "min-value": 0, // Set the minimum value to 0
            "max-labels": 10, // Optional: Adjust the maximum number of labels displayed
            "decimals": 0, // Optional: Adjust the number of decimal places
        },
        "scrollX": {
                "bar": {
                "backgroundColor": '#2596be',
                "alpha": 0.5,
                },
                "handle": {
                "backgroundColor": '#2596be',
                }
            },

        "series": [{
            "values":[], // Effective votes for next round
            "background-color": "#0070C0",
            "text": "Current Votes",
            'hover-state': { /* Hover object */
                    'background-color': "orange",
                    // 'border-width':3,
                    // 'border-color': "purple",
                    // 'line-style': "dotted"
                }
        }, {
            "values": [], // Effective votes lost this round
            "background-color": "#FF0000",
            "text": "Previous Votes"
        }]
    },
    height: '100%',
    width: '100%'
});
    </script>
    <!-- Rounds data -->
    <script>
        var rounds_data = {
            
                "3": {
                    "effective_vote_count_bar_chart": {"x_labels": ['Upgraded Water ','New Chairs for ','Benches for a W','Protect the Hea','Computers for t','Fire Hydrant Ma','5 Water Bottle ','Outdoor Fitness','Planting trees ','Invention and P','Digital Sign at','Inclusive Playg','Real-Time Bus A','24H public toil','Urban Bicycle W','Separate Bike L','Meeting Room Up','Volleyball Cour','New Playground ','Little (book ex',], "values": [11.0, 13.0, 41.0, 32.0, 48.0, 38.0, 29.037389276309845, 12.193089917753575, 37.0, 13.0, 9.0, 3.0, 40.0, 9.0, 14.840668302976171, 39.0, 3.0, 9.0, 14.0, 39.0] },
                    "effective_vote_count_stacked_bar_chart": {"x_labels": ['Upgraded Water ','New Chairs for ','Benches for a W','Protect the Hea','Fire Hydrant Ma','5 Water Bottle ','Outdoor Fitness','Planting trees ','Invention and P','Digital Sign at','Inclusive Playg','Real-Time Bus A','24H public toil','Urban Bicycle W','Separate Bike L','Meeting Room Up','Volleyball Cour','New Playground ','Little (book ex',], "initial_values": [ 11.0, 13.0, 41.0, 32.0, 38.0, 29.037389276309845, 12.193089917753575, 37.0, 13.0, 9.0, 3.0, 40.0, 9.0, 14.840668302976171, 39.0, 3.0, 9.0, 14.0, 39.0,], "reduced_values": [0.0, 0.0, 0.0, 0.0, 0.0, -3.552713678800501e-15, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -1.7763568394002505e-15, 0.0, 0.0, 0.0, 0.0, 0.0] },
                    "pie_chart_triplets": [[{"project_name": "Benches for a Walkable City","round_name": "Computers for the community learning center","title":  "'Benches for a W' Voters'","values_1": [35],"text_1":  "'Computers for t' Voters","values_2": [6] ,"text_2": "Non 'Computers for t' Voters"},{"project_name": "Separate Bike Lanes from Traffic","round_name": "Computers for the community learning center","title":  "'Separate Bike L' Voters'","values_1": [34],"text_1":  "'Computers for t' Voters","values_2": [5] ,"text_2": "Non 'Computers for t' Voters"},{"project_name": "Little (book exchange) libraries","round_name": "Computers for the community learning center","title":  "'Little (book ex' Voters'","values_1": [33],"text_1":  "'Computers for t' Voters","values_2": [6] ,"text_2": "Non 'Computers for t' Voters"},], [{"project_name": "Planting trees in the city","round_name": "Computers for the community learning center","title":  "'Planting trees ' Voters'","values_1": [32],"text_1":  "'Computers for t' Voters","values_2": [5] ,"text_2": "Non 'Computers for t' Voters"},{"project_name": "Fire Hydrant Markers","round_name": "Computers for the community learning center","title":  "'Fire Hydrant Ma' Voters'","values_1": [31],"text_1":  "'Computers for t' Voters","values_2": [7] ,"text_2": "Non 'Computers for t' Voters"},{"project_name": "Real-Time Bus Arrival Monitors in bus stations","round_name": "Computers for the community learning center","title":  "'Real-Time Bus A' Voters'","values_1": [30],"text_1":  "'Computers for t' Voters","values_2": [10] ,"text_2": "Non 'Computers for t' Voters"},], [{"project_name": "5 Water Bottle Refill Stations","round_name": "Computers for the community learning center","title":  "'5 Water Bottle ' Voters'","values_1": [29],"text_1":  "'Computers for t' Voters","values_2": [7] ,"text_2": "Non 'Computers for t' Voters"},{"project_name": "Outdoor Fitness Equipment in the public park","round_name": "Computers for the community learning center","title":  "'Outdoor Fitness' Voters'","values_1": [26],"text_1":  "'Computers for t' Voters","values_2": [7] ,"text_2": "Non 'Computers for t' Voters"},{"project_name": "Protect the Health and Safety of our Firefighters","round_name": "Computers for the community learning center","title":  "'Protect the Hea' Voters'","values_1": [24],"text_1":  "'Computers for t' Voters","values_2": [8] ,"text_2": "Non 'Computers for t' Voters"},], [{"project_name": "Urban Bicycle Wash Stations","round_name": "Computers for the community learning center","title":  "'Urban Bicycle W' Voters'","values_1": [15],"text_1":  "'Computers for t' Voters","values_2": [6] ,"text_2": "Non 'Computers for t' Voters"},{"project_name": "Invention and Production of Music","round_name": "Computers for the community learning center","title":  "'Invention and P' Voters'","values_1": [9],"text_1":  "'Computers for t' Voters","values_2": [4] ,"text_2": "Non 'Computers for t' Voters"},{"project_name": "New Chairs for Public Schools","round_name": "Computers for the community learning center","title":  "'New Chairs for ' Voters'","values_1": [8],"text_1":  "'Computers for t' Voters","values_2": [5] ,"text_2": "Non 'Computers for t' Voters"},], [{"project_name": "New Playground for public school","round_name": "Computers for the community learning center","title":  "'New Playground ' Voters'","values_1": [8],"text_1":  "'Computers for t' Voters","values_2": [6] ,"text_2": "Non 'Computers for t' Voters"},{"project_name": "Volleyball Court in the public park","round_name": "Computers for the community learning center","title":  "'Volleyball Cour' Voters'","values_1": [7],"text_1":  "'Computers for t' Voters","values_2": [2] ,"text_2": "Non 'Computers for t' Voters"},{"project_name": "Upgraded Water Fountains for Public Schools","round_name": "Computers for the community learning center","title":  "'Upgraded Water ' Voters'","values_1": [6],"text_1":  "'Computers for t' Voters","values_2": [5] ,"text_2": "Non 'Computers for t' Voters"},], [{"project_name": "Digital Sign at City Hall in Multiple Languages","round_name": "Computers for the community learning center","title":  "'Digital Sign at' Voters'","values_1": [4],"text_1":  "'Computers for t' Voters","values_2": [5] ,"text_2": "Non 'Computers for t' Voters"},{"project_name": "24H public toilet","round_name": "Computers for the community learning center","title":  "'24H public toil' Voters'","values_1": [3],"text_1":  "'Computers for t' Voters","values_2": [6] ,"text_2": "Non 'Computers for t' Voters"},{"project_name": "Inclusive Playground for All Kids","round_name": "Computers for the community learning center","title":  "'Inclusive Playg' Voters'","values_1": [2],"text_1":  "'Computers for t' Voters","values_2": [1] ,"text_2": "Non 'Computers for t' Voters"},], [{"project_name": "Meeting Room Upgrade for libraries","round_name": "Computers for the community learning center","title":  "'Meeting Room Up' Voters'","values_1": [1],"text_1":  "'Computers for t' Voters","values_2": [2] ,"text_2": "Non 'Computers for t' Voters"},], ],
                    "sankey_chart": {"rows": [['Computers for t', 'Benches for a W', 35],['Computers for t', 'Separate Bike L', 34],['Computers for t', 'Little (book ex', 33],['Computers for t', 'Planting trees ', 32],['Computers for t', 'Fire Hydrant Ma', 31],['Computers for t', 'Real-Time Bus A', 30],['Computers for t', 'Other', 142],]},
                    "chord_chart": {"series": [        {        "values":[0,35,34,33,32,31,30,0,],        "text": "Computers for t"    },    {        "values":[35,0,32,29,27,29,29,],        "text": "Benches for a W"    },    {        "values":[34,32,0,27,23,27,26,],        "text": "Separate Bike L"    },    {        "values":[33,29,27,0,22,23,25,],        "text": "Little (book ex"    },    {        "values":[32,27,23,22,0,23,22,],        "text": "Planting trees "    },    {        "values":[31,29,27,23,23,0,27,],        "text": "Fire Hydrant Ma"    },    {        "values":[30,29,26,25,22,27,0,],        "text": "Real-Time Bus A"    },]},
                    "intro": {"project_name": "Computers for the community learning center", "round_number": "1", "description": "Funding 20 laptops including mice and keyboards, giving students a place to study.", "project_cost" : "27000", "budget_remaining" : "473000.0", "effective_vote_count" : "48.0", "project_votes" : "48" },
                },
            
                "14": {
                    "effective_vote_count_bar_chart": {"x_labels": ['Upgraded Water ','New Chairs for ','Benches for a W','Protect the Hea','Fire Hydrant Ma','5 Water Bottle ','Outdoor Fitness','Planting trees ','Invention and P','Digital Sign at','Inclusive Playg','Real-Time Bus A','24H public toil','Urban Bicycle W','Separate Bike L','Meeting Room Up','Volleyball Cour','New Playground ','Little (book ex',], "values": [11.0, 13.0, 41.0, 32.0, 38.0, 29.037389276309845, 12.193089917753575, 37.0, 13.0, 9.0, 3.0, 40.0, 9.0, 14.840668302976171, 39.0, 3.0, 9.0, 14.0, 39.0] },
                    "effective_vote_count_stacked_bar_chart": {"x_labels": ['Upgraded Water ','New Chairs for ','Protect the Hea','Fire Hydrant Ma','5 Water Bottle ','Outdoor Fitness','Planting trees ','Invention and P','Digital Sign at','Inclusive Playg','Real-Time Bus A','24H public toil','Urban Bicycle W','Separate Bike L','Meeting Room Up','Volleyball Cour','New Playground ','Little (book ex',], "initial_values": [ 11.0, 13.0, 32.0, 38.0, 29.037389276309845, 12.193089917753575, 37.0, 13.0, 9.0, 3.0, 40.0, 9.0, 14.840668302976171, 39.0, 3.0, 9.0, 14.0, 39.0,], "reduced_values": [0.0, 0.0, 0.0, 0.0, -3.552713678800501e-15, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -1.7763568394002505e-15, 0.0, 0.0, 0.0, 0.0, 0.0] },
                    "pie_chart_triplets": [[{"project_name": "Separate Bike Lanes from Traffic","round_name": "Benches for a Walkable City","title":  "'Separate Bike L' Voters'","values_1": [32],"text_1":  "'Benches for a W' Voters","values_2": [7] ,"text_2": "Non 'Benches for a W' Voters"},{"project_name": "Fire Hydrant Markers","round_name": "Benches for a Walkable City","title":  "'Fire Hydrant Ma' Voters'","values_1": [29],"text_1":  "'Benches for a W' Voters","values_2": [9] ,"text_2": "Non 'Benches for a W' Voters"},{"project_name": "Real-Time Bus Arrival Monitors in bus stations","round_name": "Benches for a Walkable City","title":  "'Real-Time Bus A' Voters'","values_1": [29],"text_1":  "'Benches for a W' Voters","values_2": [11] ,"text_2": "Non 'Benches for a W' Voters"},], [{"project_name": "Little (book exchange) libraries","round_name": "Benches for a Walkable City","title":  "'Little (book ex' Voters'","values_1": [29],"text_1":  "'Benches for a W' Voters","values_2": [10] ,"text_2": "Non 'Benches for a W' Voters"},{"project_name": "Planting trees in the city","round_name": "Benches for a Walkable City","title":  "'Planting trees ' Voters'","values_1": [27],"text_1":  "'Benches for a W' Voters","values_2": [10] ,"text_2": "Non 'Benches for a W' Voters"},{"project_name": "5 Water Bottle Refill Stations","round_name": "Benches for a Walkable City","title":  "'5 Water Bottle ' Voters'","values_1": [25],"text_1":  "'Benches for a W' Voters","values_2": [11] ,"text_2": "Non 'Benches for a W' Voters"},], [{"project_name": "Outdoor Fitness Equipment in the public park","round_name": "Benches for a Walkable City","title":  "'Outdoor Fitness' Voters'","values_1": [24],"text_1":  "'Benches for a W' Voters","values_2": [9] ,"text_2": "Non 'Benches for a W' Voters"},{"project_name": "Protect the Health and Safety of our Firefighters","round_name": "Benches for a Walkable City","title":  "'Protect the Hea' Voters'","values_1": [18],"text_1":  "'Benches for a W' Voters","values_2": [14] ,"text_2": "Non 'Benches for a W' Voters"},{"project_name": "Urban Bicycle Wash Stations","round_name": "Benches for a Walkable City","title":  "'Urban Bicycle W' Voters'","values_1": [14],"text_1":  "'Benches for a W' Voters","values_2": [7] ,"text_2": "Non 'Benches for a W' Voters"},], [{"project_name": "New Chairs for Public Schools","round_name": "Benches for a Walkable City","title":  "'New Chairs for ' Voters'","values_1": [7],"text_1":  "'Benches for a W' Voters","values_2": [6] ,"text_2": "Non 'Benches for a W' Voters"},{"project_name": "Volleyball Court in the public park","round_name": "Benches for a Walkable City","title":  "'Volleyball Cour' Voters'","values_1": [7],"text_1":  "'Benches for a W' Voters","values_2": [2] ,"text_2": "Non 'Benches for a W' Voters"},{"project_name": "Invention and Production of Music","round_name": "Benches for a Walkable City","title":  "'Invention and P' Voters'","values_1": [6],"text_1":  "'Benches for a W' Voters","values_2": [7] ,"text_2": "Non 'Benches for a W' Voters"},], [{"project_name": "New Playground for public school","round_name": "Benches for a Walkable City","title":  "'New Playground ' Voters'","values_1": [6],"text_1":  "'Benches for a W' Voters","values_2": [8] ,"text_2": "Non 'Benches for a W' Voters"},{"project_name": "Digital Sign at City Hall in Multiple Languages","round_name": "Benches for a Walkable City","title":  "'Digital Sign at' Voters'","values_1": [5],"text_1":  "'Benches for a W' Voters","values_2": [4] ,"text_2": "Non 'Benches for a W' Voters"},{"project_name": "24H public toilet","round_name": "Benches for a Walkable City","title":  "'24H public toil' Voters'","values_1": [4],"text_1":  "'Benches for a W' Voters","values_2": [5] ,"text_2": "Non 'Benches for a W' Voters"},], [{"project_name": "Upgraded Water Fountains for Public Schools","round_name": "Benches for a Walkable City","title":  "'Upgraded Water ' Voters'","values_1": [3],"text_1":  "'Benches for a W' Voters","values_2": [8] ,"text_2": "Non 'Benches for a W' Voters"},{"project_name": "Inclusive Playground for All Kids","round_name": "Benches for a Walkable City","title":  "'Inclusive Playg' Voters'","values_1": [2],"text_1":  "'Benches for a W' Voters","values_2": [1] ,"text_2": "Non 'Benches for a W' Voters"},{"project_name": "Meeting Room Upgrade for libraries","round_name": "Benches for a Walkable City","title":  "'Meeting Room Up' Voters'","values_1": [0],"text_1":  "'Benches for a W' Voters","values_2": [3] ,"text_2": "Non 'Benches for a W' Voters"},], ],
                    "sankey_chart": {"rows": [['Benches for a W', 'Computers for t', 35],['Benches for a W', 'Separate Bike L', 32],['Benches for a W', 'Fire Hydrant Ma', 29],['Benches for a W', 'Real-Time Bus A', 29],['Benches for a W', 'Little (book ex', 29],['Benches for a W', 'Planting trees ', 27],['Benches for a W', 'Other', 121],]},
                    "chord_chart": {"series": [        {        "values":[0,35,32,29,29,29,27,0,],        "text": "Benches for a W"    },    {        "values":[35,0,34,31,30,33,32,],        "text": "Computers for t"    },    {        "values":[32,34,0,27,26,27,23,],        "text": "Separate Bike L"    },    {        "values":[29,31,27,0,27,23,23,],        "text": "Fire Hydrant Ma"    },    {        "values":[29,30,26,27,0,25,22,],        "text": "Real-Time Bus A"    },    {        "values":[29,33,27,23,25,0,22,],        "text": "Little (book ex"    },    {        "values":[27,32,23,23,22,22,0,],        "text": "Planting trees "    },]},
                    "intro": {"project_name": "Benches for a Walkable City", "round_number": "2", "description": "Install 12 benches across town so that people of all ages and abilities can enjoy benches for resting, talking, tinkering with electronic devices, people watching, and being outdoors (3 of which are shown in the map).", "project_cost" : "25000", "budget_remaining" : "448000.0", "effective_vote_count" : "41.0", "project_votes" : "41" },
                },
            
                "13": {
                    "effective_vote_count_bar_chart": {"x_labels": ['Upgraded Water ','New Chairs for ','Protect the Hea','Fire Hydrant Ma','5 Water Bottle ','Outdoor Fitness','Planting trees ','Invention and P','Digital Sign at','Inclusive Playg','Real-Time Bus A','24H public toil','Urban Bicycle W','Separate Bike L','Meeting Room Up','Volleyball Cour','New Playground ','Little (book ex',], "values": [11.0, 13.0, 32.0, 38.0, 29.037389276309845, 12.193089917753575, 37.0, 13.0, 9.0, 3.0, 40.0, 9.0, 14.840668302976171, 39.0, 3.0, 9.0, 14.0, 39.0] },
                    "effective_vote_count_stacked_bar_chart": {"x_labels": ['Upgraded Water ','New Chairs for ','Protect the Hea','Fire Hydrant Ma','5 Water Bottle ','Outdoor Fitness','Planting trees ','Invention and P','Digital Sign at','Inclusive Playg','24H public toil','Urban Bicycle W','Separate Bike L','Meeting Room Up','Volleyball Cour','New Playground ','Little (book ex',], "initial_values": [ 11.0, 13.0, 32.0, 38.0, 29.037389276309845, 12.193089917753575, 37.0, 13.0, 9.0, 3.0, 9.0, 14.840668302976171, 39.0, 3.0, 9.0, 14.0, 39.0,], "reduced_values": [0.0, 0.0, 0.0, 0.0, -3.552713678800501e-15, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -1.7763568394002505e-15, 0.0, 0.0, 0.0, 0.0, 0.0] },
                    "pie_chart_triplets": [[{"project_name": "Fire Hydrant Markers","round_name": "Real-Time Bus Arrival Monitors in bus stations","title":  "'Fire Hydrant Ma' Voters'","values_1": [27],"text_1":  "'Real-Time Bus A' Voters","values_2": [11] ,"text_2": "Non 'Real-Time Bus A' Voters"},{"project_name": "Separate Bike Lanes from Traffic","round_name": "Real-Time Bus Arrival Monitors in bus stations","title":  "'Separate Bike L' Voters'","values_1": [26],"text_1":  "'Real-Time Bus A' Voters","values_2": [13] ,"text_2": "Non 'Real-Time Bus A' Voters"},{"project_name": "Little (book exchange) libraries","round_name": "Real-Time Bus Arrival Monitors in bus stations","title":  "'Little (book ex' Voters'","values_1": [25],"text_1":  "'Real-Time Bus A' Voters","values_2": [14] ,"text_2": "Non 'Real-Time Bus A' Voters"},], [{"project_name": "5 Water Bottle Refill Stations","round_name": "Real-Time Bus Arrival Monitors in bus stations","title":  "'5 Water Bottle ' Voters'","values_1": [24],"text_1":  "'Real-Time Bus A' Voters","values_2": [12] ,"text_2": "Non 'Real-Time Bus A' Voters"},{"project_name": "Planting trees in the city","round_name": "Real-Time Bus Arrival Monitors in bus stations","title":  "'Planting trees ' Voters'","values_1": [22],"text_1":  "'Real-Time Bus A' Voters","values_2": [15] ,"text_2": "Non 'Real-Time Bus A' Voters"},{"project_name": "Outdoor Fitness Equipment in the public park","round_name": "Real-Time Bus Arrival Monitors in bus stations","title":  "'Outdoor Fitness' Voters'","values_1": [21],"text_1":  "'Real-Time Bus A' Voters","values_2": [12] ,"text_2": "Non 'Real-Time Bus A' Voters"},], [{"project_name": "Protect the Health and Safety of our Firefighters","round_name": "Real-Time Bus Arrival Monitors in bus stations","title":  "'Protect the Hea' Voters'","values_1": [20],"text_1":  "'Real-Time Bus A' Voters","values_2": [12] ,"text_2": "Non 'Real-Time Bus A' Voters"},{"project_name": "Urban Bicycle Wash Stations","round_name": "Real-Time Bus Arrival Monitors in bus stations","title":  "'Urban Bicycle W' Voters'","values_1": [13],"text_1":  "'Real-Time Bus A' Voters","values_2": [8] ,"text_2": "Non 'Real-Time Bus A' Voters"},{"project_name": "Invention and Production of Music","round_name": "Real-Time Bus Arrival Monitors in bus stations","title":  "'Invention and P' Voters'","values_1": [7],"text_1":  "'Real-Time Bus A' Voters","values_2": [6] ,"text_2": "Non 'Real-Time Bus A' Voters"},], [{"project_name": "New Playground for public school","round_name": "Real-Time Bus Arrival Monitors in bus stations","title":  "'New Playground ' Voters'","values_1": [7],"text_1":  "'Real-Time Bus A' Voters","values_2": [7] ,"text_2": "Non 'Real-Time Bus A' Voters"},{"project_name": "24H public toilet","round_name": "Real-Time Bus Arrival Monitors in bus stations","title":  "'24H public toil' Voters'","values_1": [6],"text_1":  "'Real-Time Bus A' Voters","values_2": [3] ,"text_2": "Non 'Real-Time Bus A' Voters"},{"project_name": "Digital Sign at City Hall in Multiple Languages","round_name": "Real-Time Bus Arrival Monitors in bus stations","title":  "'Digital Sign at' Voters'","values_1": [5],"text_1":  "'Real-Time Bus A' Voters","values_2": [4] ,"text_2": "Non 'Real-Time Bus A' Voters"},], [{"project_name": "Volleyball Court in the public park","round_name": "Real-Time Bus Arrival Monitors in bus stations","title":  "'Volleyball Cour' Voters'","values_1": [5],"text_1":  "'Real-Time Bus A' Voters","values_2": [4] ,"text_2": "Non 'Real-Time Bus A' Voters"},{"project_name": "Upgraded Water Fountains for Public Schools","round_name": "Real-Time Bus Arrival Monitors in bus stations","title":  "'Upgraded Water ' Voters'","values_1": [5],"text_1":  "'Real-Time Bus A' Voters","values_2": [6] ,"text_2": "Non 'Real-Time Bus A' Voters"},{"project_name": "New Chairs for Public Schools","round_name": "Real-Time Bus Arrival Monitors in bus stations","title":  "'New Chairs for ' Voters'","values_1": [4],"text_1":  "'Real-Time Bus A' Voters","values_2": [9] ,"text_2": "Non 'Real-Time Bus A' Voters"},], [{"project_name": "Inclusive Playground for All Kids","round_name": "Real-Time Bus Arrival Monitors in bus stations","title":  "'Inclusive Playg' Voters'","values_1": [1],"text_1":  "'Real-Time Bus A' Voters","values_2": [2] ,"text_2": "Non 'Real-Time Bus A' Voters"},{"project_name": "Meeting Room Upgrade for libraries","round_name": "Real-Time Bus Arrival Monitors in bus stations","title":  "'Meeting Room Up' Voters'","values_1": [0],"text_1":  "'Real-Time Bus A' Voters","values_2": [3] ,"text_2": "Non 'Real-Time Bus A' Voters"},], ],
                    "sankey_chart": {"rows": [['Real-Time Bus A', 'Computers for t', 30],['Real-Time Bus A', 'Benches for a W', 29],['Real-Time Bus A', 'Fire Hydrant Ma', 27],['Real-Time Bus A', 'Separate Bike L', 26],['Real-Time Bus A', 'Little (book ex', 25],['Real-Time Bus A', '5 Water Bottle ', 24],['Real-Time Bus A', 'Other', 116],]},
                    "chord_chart": {"series": [        {        "values":[0,30,29,27,26,25,24,0,],        "text": "Real-Time Bus A"    },    {        "values":[30,0,35,31,34,33,29,],        "text": "Computers for t"    },    {        "values":[29,35,0,29,32,29,25,],        "text": "Benches for a W"    },    {        "values":[27,31,29,0,27,23,20,],        "text": "Fire Hydrant Ma"    },    {        "values":[26,34,32,27,0,27,23,],        "text": "Separate Bike L"    },    {        "values":[25,33,29,23,27,0,25,],        "text": "Little (book ex"    },    {        "values":[24,29,25,20,23,25,0,],        "text": "5 Water Bottle "    },]},
                    "intro": {"project_name": "Real-Time Bus Arrival Monitors in bus stations", "round_number": "3", "description": "Real-time bus arrival monitors bus stops will inform travelers when the next bus will arrive, so they can adjust their plans if needed.", "project_cost" : "24000", "budget_remaining" : "424000.0", "effective_vote_count" : "40.0", "project_votes" : "40" },
                },
            
                "12": {
                    "effective_vote_count_bar_chart": {"x_labels": ['Upgraded Water ','New Chairs for ','Protect the Hea','Fire Hydrant Ma','5 Water Bottle ','Outdoor Fitness','Planting trees ','Invention and P','Digital Sign at','Inclusive Playg','24H public toil','Urban Bicycle W','Separate Bike L','Meeting Room Up','Volleyball Cour','New Playground ','Little (book ex',], "values": [11.0, 13.0, 32.0, 38.0, 29.037389276309845, 12.193089917753575, 37.0, 13.0, 9.0, 3.0, 9.0, 14.840668302976171, 39.0, 3.0, 9.0, 14.0, 39.0] },
                    "effective_vote_count_stacked_bar_chart": {"x_labels": ['Upgraded Water ','New Chairs for ','Protect the Hea','Fire Hydrant Ma','5 Water Bottle ','Outdoor Fitness','Planting trees ','Invention and P','Digital Sign at','Inclusive Playg','24H public toil','Urban Bicycle W','Meeting Room Up','Volleyball Cour','New Playground ','Little (book ex',], "initial_values": [ 11.0, 13.0, 32.0, 38.0, 29.037389276309845, 12.193089917753575, 37.0, 13.0, 9.0, 3.0, 9.0, 14.840668302976171, 3.0, 9.0, 14.0, 39.0,], "reduced_values": [0.0, 0.0, 0.0, 0.0, -3.552713678800501e-15, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -1.7763568394002505e-15, 0.0, 0.0, 0.0, 0.0] },
                    "pie_chart_triplets": [[{"project_name": "Fire Hydrant Markers","round_name": "Separate Bike Lanes from Traffic","title":  "'Fire Hydrant Ma' Voters'","values_1": [27],"text_1":  "'Separate Bike L' Voters","values_2": [11] ,"text_2": "Non 'Separate Bike L' Voters"},{"project_name": "Little (book exchange) libraries","round_name": "Separate Bike Lanes from Traffic","title":  "'Little (book ex' Voters'","values_1": [27],"text_1":  "'Separate Bike L' Voters","values_2": [12] ,"text_2": "Non 'Separate Bike L' Voters"},{"project_name": "5 Water Bottle Refill Stations","round_name": "Separate Bike Lanes from Traffic","title":  "'5 Water Bottle ' Voters'","values_1": [23],"text_1":  "'Separate Bike L' Voters","values_2": [13] ,"text_2": "Non 'Separate Bike L' Voters"},], [{"project_name": "Planting trees in the city","round_name": "Separate Bike Lanes from Traffic","title":  "'Planting trees ' Voters'","values_1": [23],"text_1":  "'Separate Bike L' Voters","values_2": [14] ,"text_2": "Non 'Separate Bike L' Voters"},{"project_name": "Outdoor Fitness Equipment in the public park","round_name": "Separate Bike Lanes from Traffic","title":  "'Outdoor Fitness' Voters'","values_1": [22],"text_1":  "'Separate Bike L' Voters","values_2": [11] ,"text_2": "Non 'Separate Bike L' Voters"},{"project_name": "Protect the Health and Safety of our Firefighters","round_name": "Separate Bike Lanes from Traffic","title":  "'Protect the Hea' Voters'","values_1": [18],"text_1":  "'Separate Bike L' Voters","values_2": [14] ,"text_2": "Non 'Separate Bike L' Voters"},], [{"project_name": "Urban Bicycle Wash Stations","round_name": "Separate Bike Lanes from Traffic","title":  "'Urban Bicycle W' Voters'","values_1": [14],"text_1":  "'Separate Bike L' Voters","values_2": [7] ,"text_2": "Non 'Separate Bike L' Voters"},{"project_name": "Invention and Production of Music","round_name": "Separate Bike Lanes from Traffic","title":  "'Invention and P' Voters'","values_1": [9],"text_1":  "'Separate Bike L' Voters","values_2": [4] ,"text_2": "Non 'Separate Bike L' Voters"},{"project_name": "Volleyball Court in the public park","round_name": "Separate Bike Lanes from Traffic","title":  "'Volleyball Cour' Voters'","values_1": [6],"text_1":  "'Separate Bike L' Voters","values_2": [3] ,"text_2": "Non 'Separate Bike L' Voters"},], [{"project_name": "24H public toilet","round_name": "Separate Bike Lanes from Traffic","title":  "'24H public toil' Voters'","values_1": [6],"text_1":  "'Separate Bike L' Voters","values_2": [3] ,"text_2": "Non 'Separate Bike L' Voters"},{"project_name": "New Chairs for Public Schools","round_name": "Separate Bike Lanes from Traffic","title":  "'New Chairs for ' Voters'","values_1": [5],"text_1":  "'Separate Bike L' Voters","values_2": [8] ,"text_2": "Non 'Separate Bike L' Voters"},{"project_name": "New Playground for public school","round_name": "Separate Bike Lanes from Traffic","title":  "'New Playground ' Voters'","values_1": [5],"text_1":  "'Separate Bike L' Voters","values_2": [9] ,"text_2": "Non 'Separate Bike L' Voters"},], [{"project_name": "Digital Sign at City Hall in Multiple Languages","round_name": "Separate Bike Lanes from Traffic","title":  "'Digital Sign at' Voters'","values_1": [4],"text_1":  "'Separate Bike L' Voters","values_2": [5] ,"text_2": "Non 'Separate Bike L' Voters"},{"project_name": "Upgraded Water Fountains for Public Schools","round_name": "Separate Bike Lanes from Traffic","title":  "'Upgraded Water ' Voters'","values_1": [3],"text_1":  "'Separate Bike L' Voters","values_2": [8] ,"text_2": "Non 'Separate Bike L' Voters"},{"project_name": "Inclusive Playground for All Kids","round_name": "Separate Bike Lanes from Traffic","title":  "'Inclusive Playg' Voters'","values_1": [1],"text_1":  "'Separate Bike L' Voters","values_2": [2] ,"text_2": "Non 'Separate Bike L' Voters"},], [{"project_name": "Meeting Room Upgrade for libraries","round_name": "Separate Bike Lanes from Traffic","title":  "'Meeting Room Up' Voters'","values_1": [0],"text_1":  "'Separate Bike L' Voters","values_2": [3] ,"text_2": "Non 'Separate Bike L' Voters"},], ],
                    "sankey_chart": {"rows": [['Separate Bike L', 'Computers for t', 34],['Separate Bike L', 'Benches for a W', 32],['Separate Bike L', 'Fire Hydrant Ma', 27],['Separate Bike L', 'Little (book ex', 27],['Separate Bike L', 'Real-Time Bus A', 26],['Separate Bike L', '5 Water Bottle ', 23],['Separate Bike L', 'Other', 116],]},
                    "chord_chart": {"series": [        {        "values":[0,34,32,27,27,26,23,0,],        "text": "Separate Bike L"    },    {        "values":[34,0,35,31,33,30,29,],        "text": "Computers for t"    },    {        "values":[32,35,0,29,29,29,25,],        "text": "Benches for a W"    },    {        "values":[27,31,29,0,23,27,20,],        "text": "Fire Hydrant Ma"    },    {        "values":[27,33,29,23,0,25,25,],        "text": "Little (book ex"    },    {        "values":[26,30,29,27,25,0,24,],        "text": "Real-Time Bus A"    },    {        "values":[23,29,25,20,25,24,0,],        "text": "5 Water Bottle "    },]},
                    "intro": {"project_name": "Separate Bike Lanes from Traffic", "round_number": "4", "description": "Improve safety for drivers and bikers by moving bike lanes to be between street parking spots and the sidewalk, reducing car-bike interactions and potential collisions.", "project_cost" : "50000", "budget_remaining" : "374000.0", "effective_vote_count" : "39.0", "project_votes" : "39" },
                },
            
                "2": {
                    "effective_vote_count_bar_chart": {"x_labels": ['Upgraded Water ','New Chairs for ','Protect the Hea','Fire Hydrant Ma','5 Water Bottle ','Outdoor Fitness','Planting trees ','Invention and P','Digital Sign at','Inclusive Playg','24H public toil','Urban Bicycle W','Meeting Room Up','Volleyball Cour','New Playground ','Little (book ex',], "values": [11.0, 13.0, 32.0, 38.0, 29.037389276309845, 12.193089917753575, 37.0, 13.0, 9.0, 3.0, 9.0, 14.840668302976171, 3.0, 9.0, 14.0, 39.0] },
                    "effective_vote_count_stacked_bar_chart": {"x_labels": ['Upgraded Water ','New Chairs for ','Protect the Hea','Fire Hydrant Ma','5 Water Bottle ','Outdoor Fitness','Planting trees ','Invention and P','Digital Sign at','Inclusive Playg','24H public toil','Urban Bicycle W','Meeting Room Up','Volleyball Cour','New Playground ',], "initial_values": [ 11.0, 13.0, 32.0, 38.0, 29.037389276309845, 12.193089917753575, 37.0, 13.0, 9.0, 3.0, 9.0, 14.840668302976171, 3.0, 9.0, 14.0,], "reduced_values": [0.0, 0.0, 0.0, 0.0, -3.552713678800501e-15, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -1.7763568394002505e-15, 0.0, 0.0, 0.0] },
                    "pie_chart_triplets": [[{"project_name": "5 Water Bottle Refill Stations","round_name": "Little (book exchange) libraries","title":  "'5 Water Bottle ' Voters'","values_1": [25],"text_1":  "'Little (book ex' Voters","values_2": [11] ,"text_2": "Non 'Little (book ex' Voters"},{"project_name": "Fire Hydrant Markers","round_name": "Little (book exchange) libraries","title":  "'Fire Hydrant Ma' Voters'","values_1": [23],"text_1":  "'Little (book ex' Voters","values_2": [15] ,"text_2": "Non 'Little (book ex' Voters"},{"project_name": "Planting trees in the city","round_name": "Little (book exchange) libraries","title":  "'Planting trees ' Voters'","values_1": [22],"text_1":  "'Little (book ex' Voters","values_2": [15] ,"text_2": "Non 'Little (book ex' Voters"},], [{"project_name": "Outdoor Fitness Equipment in the public park","round_name": "Little (book exchange) libraries","title":  "'Outdoor Fitness' Voters'","values_1": [22],"text_1":  "'Little (book ex' Voters","values_2": [11] ,"text_2": "Non 'Little (book ex' Voters"},{"project_name": "Protect the Health and Safety of our Firefighters","round_name": "Little (book exchange) libraries","title":  "'Protect the Hea' Voters'","values_1": [17],"text_1":  "'Little (book ex' Voters","values_2": [15] ,"text_2": "Non 'Little (book ex' Voters"},{"project_name": "Urban Bicycle Wash Stations","round_name": "Little (book exchange) libraries","title":  "'Urban Bicycle W' Voters'","values_1": [13],"text_1":  "'Little (book ex' Voters","values_2": [8] ,"text_2": "Non 'Little (book ex' Voters"},], [{"project_name": "New Chairs for Public Schools","round_name": "Little (book exchange) libraries","title":  "'New Chairs for ' Voters'","values_1": [8],"text_1":  "'Little (book ex' Voters","values_2": [5] ,"text_2": "Non 'Little (book ex' Voters"},{"project_name": "Invention and Production of Music","round_name": "Little (book exchange) libraries","title":  "'Invention and P' Voters'","values_1": [7],"text_1":  "'Little (book ex' Voters","values_2": [6] ,"text_2": "Non 'Little (book ex' Voters"},{"project_name": "New Playground for public school","round_name": "Little (book exchange) libraries","title":  "'New Playground ' Voters'","values_1": [7],"text_1":  "'Little (book ex' Voters","values_2": [7] ,"text_2": "Non 'Little (book ex' Voters"},], [{"project_name": "Volleyball Court in the public park","round_name": "Little (book exchange) libraries","title":  "'Volleyball Cour' Voters'","values_1": [6],"text_1":  "'Little (book ex' Voters","values_2": [3] ,"text_2": "Non 'Little (book ex' Voters"},{"project_name": "Digital Sign at City Hall in Multiple Languages","round_name": "Little (book exchange) libraries","title":  "'Digital Sign at' Voters'","values_1": [4],"text_1":  "'Little (book ex' Voters","values_2": [5] ,"text_2": "Non 'Little (book ex' Voters"},{"project_name": "Upgraded Water Fountains for Public Schools","round_name": "Little (book exchange) libraries","title":  "'Upgraded Water ' Voters'","values_1": [4],"text_1":  "'Little (book ex' Voters","values_2": [7] ,"text_2": "Non 'Little (book ex' Voters"},], [{"project_name": "24H public toilet","round_name": "Little (book exchange) libraries","title":  "'24H public toil' Voters'","values_1": [4],"text_1":  "'Little (book ex' Voters","values_2": [5] ,"text_2": "Non 'Little (book ex' Voters"},{"project_name": "Inclusive Playground for All Kids","round_name": "Little (book exchange) libraries","title":  "'Inclusive Playg' Voters'","values_1": [3],"text_1":  "'Little (book ex' Voters","values_2": [0] ,"text_2": "Non 'Little (book ex' Voters"},{"project_name": "Meeting Room Upgrade for libraries","round_name": "Little (book exchange) libraries","title":  "'Meeting Room Up' Voters'","values_1": [0],"text_1":  "'Little (book ex' Voters","values_2": [3] ,"text_2": "Non 'Little (book ex' Voters"},], ],
                    "sankey_chart": {"rows": [['Little (book ex', 'Computers for t', 33],['Little (book ex', 'Benches for a W', 29],['Little (book ex', 'Separate Bike L', 27],['Little (book ex', '5 Water Bottle ', 25],['Little (book ex', 'Real-Time Bus A', 25],['Little (book ex', 'Fire Hydrant Ma', 23],['Little (book ex', 'Other', 117],]},
                    "chord_chart": {"series": [        {        "values":[0,33,29,27,25,25,23,0,],        "text": "Little (book ex"    },    {        "values":[33,0,35,34,29,30,31,],        "text": "Computers for t"    },    {        "values":[29,35,0,32,25,29,29,],        "text": "Benches for a W"    },    {        "values":[27,34,32,0,23,26,27,],        "text": "Separate Bike L"    },    {        "values":[25,29,25,23,0,24,20,],        "text": "5 Water Bottle "    },    {        "values":[25,30,29,26,24,0,27,],        "text": "Real-Time Bus A"    },    {        "values":[23,31,29,27,20,27,0,],        "text": "Fire Hydrant Ma"    },]},
                    "intro": {"project_name": "Little (book exchange) libraries", "round_number": "5", "description": "Installing 13 little free libraries across town (3 of which are shown in the map).", "project_cost" : "13000", "budget_remaining" : "361000.0", "effective_vote_count" : "39.0", "project_votes" : "39" },
                },
            
                "31": {
                    "effective_vote_count_bar_chart": {"x_labels": ['Upgraded Water ','New Chairs for ','Protect the Hea','Fire Hydrant Ma','5 Water Bottle ','Outdoor Fitness','Planting trees ','Invention and P','Digital Sign at','Inclusive Playg','24H public toil','Urban Bicycle W','Meeting Room Up','Volleyball Cour','New Playground ',], "values": [11.0, 13.0, 32.0, 38.0, 29.037389276309845, 12.193089917753575, 37.0, 13.0, 9.0, 3.0, 9.0, 14.840668302976171, 3.0, 9.0, 14.0] },
                    "effective_vote_count_stacked_bar_chart": {"x_labels": ['Upgraded Water ','New Chairs for ','Protect the Hea','5 Water Bottle ','Outdoor Fitness','Planting trees ','Invention and P','Digital Sign at','Inclusive Playg','24H public toil','Urban Bicycle W','Meeting Room Up','Volleyball Cour','New Playground ',], "initial_values": [ 11.0, 13.0, 32.0, 29.037389276309845, 12.193089917753575, 37.0, 13.0, 9.0, 3.0, 9.0, 14.840668302976171, 3.0, 9.0, 14.0,], "reduced_values": [0.0, 0.0, 0.0, -3.552713678800501e-15, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -1.7763568394002505e-15, 0.0, 0.0, 0.0] },
                    "pie_chart_triplets": [[{"project_name": "Planting trees in the city","round_name": "Fire Hydrant Markers","title":  "'Planting trees ' Voters'","values_1": [23],"text_1":  "'Fire Hydrant Ma' Voters","values_2": [14] ,"text_2": "Non 'Fire Hydrant Ma' Voters"},{"project_name": "Outdoor Fitness Equipment in the public park","round_name": "Fire Hydrant Markers","title":  "'Outdoor Fitness' Voters'","values_1": [22],"text_1":  "'Fire Hydrant Ma' Voters","values_2": [11] ,"text_2": "Non 'Fire Hydrant Ma' Voters"},{"project_name": "5 Water Bottle Refill Stations","round_name": "Fire Hydrant Markers","title":  "'5 Water Bottle ' Voters'","values_1": [20],"text_1":  "'Fire Hydrant Ma' Voters","values_2": [16] ,"text_2": "Non 'Fire Hydrant Ma' Voters"},], [{"project_name": "Protect the Health and Safety of our Firefighters","round_name": "Fire Hydrant Markers","title":  "'Protect the Hea' Voters'","values_1": [19],"text_1":  "'Fire Hydrant Ma' Voters","values_2": [13] ,"text_2": "Non 'Fire Hydrant Ma' Voters"},{"project_name": "Urban Bicycle Wash Stations","round_name": "Fire Hydrant Markers","title":  "'Urban Bicycle W' Voters'","values_1": [14],"text_1":  "'Fire Hydrant Ma' Voters","values_2": [7] ,"text_2": "Non 'Fire Hydrant Ma' Voters"},{"project_name": "Invention and Production of Music","round_name": "Fire Hydrant Markers","title":  "'Invention and P' Voters'","values_1": [7],"text_1":  "'Fire Hydrant Ma' Voters","values_2": [6] ,"text_2": "Non 'Fire Hydrant Ma' Voters"},], [{"project_name": "Digital Sign at City Hall in Multiple Languages","round_name": "Fire Hydrant Markers","title":  "'Digital Sign at' Voters'","values_1": [7],"text_1":  "'Fire Hydrant Ma' Voters","values_2": [2] ,"text_2": "Non 'Fire Hydrant Ma' Voters"},{"project_name": "Volleyball Court in the public park","round_name": "Fire Hydrant Markers","title":  "'Volleyball Cour' Voters'","values_1": [6],"text_1":  "'Fire Hydrant Ma' Voters","values_2": [3] ,"text_2": "Non 'Fire Hydrant Ma' Voters"},{"project_name": "Upgraded Water Fountains for Public Schools","round_name": "Fire Hydrant Markers","title":  "'Upgraded Water ' Voters'","values_1": [5],"text_1":  "'Fire Hydrant Ma' Voters","values_2": [6] ,"text_2": "Non 'Fire Hydrant Ma' Voters"},], [{"project_name": "24H public toilet","round_name": "Fire Hydrant Markers","title":  "'24H public toil' Voters'","values_1": [5],"text_1":  "'Fire Hydrant Ma' Voters","values_2": [4] ,"text_2": "Non 'Fire Hydrant Ma' Voters"},{"project_name": "New Playground for public school","round_name": "Fire Hydrant Markers","title":  "'New Playground ' Voters'","values_1": [4],"text_1":  "'Fire Hydrant Ma' Voters","values_2": [10] ,"text_2": "Non 'Fire Hydrant Ma' Voters"},{"project_name": "New Chairs for Public Schools","round_name": "Fire Hydrant Markers","title":  "'New Chairs for ' Voters'","values_1": [2],"text_1":  "'Fire Hydrant Ma' Voters","values_2": [11] ,"text_2": "Non 'Fire Hydrant Ma' Voters"},], [{"project_name": "Inclusive Playground for All Kids","round_name": "Fire Hydrant Markers","title":  "'Inclusive Playg' Voters'","values_1": [2],"text_1":  "'Fire Hydrant Ma' Voters","values_2": [1] ,"text_2": "Non 'Fire Hydrant Ma' Voters"},{"project_name": "Meeting Room Upgrade for libraries","round_name": "Fire Hydrant Markers","title":  "'Meeting Room Up' Voters'","values_1": [2],"text_1":  "'Fire Hydrant Ma' Voters","values_2": [1] ,"text_2": "Non 'Fire Hydrant Ma' Voters"},], ],
                    "sankey_chart": {"rows": [['Fire Hydrant Ma', 'Computers for t', 31],['Fire Hydrant Ma', 'Benches for a W', 29],['Fire Hydrant Ma', 'Separate Bike L', 27],['Fire Hydrant Ma', 'Real-Time Bus A', 27],['Fire Hydrant Ma', 'Planting trees ', 23],['Fire Hydrant Ma', 'Little (book ex', 23],['Fire Hydrant Ma', 'Other', 115],]},
                    "chord_chart": {"series": [        {        "values":[0,31,29,27,27,23,23,0,],        "text": "Fire Hydrant Ma"    },    {        "values":[31,0,35,34,30,32,33,],        "text": "Computers for t"    },    {        "values":[29,35,0,32,29,27,29,],        "text": "Benches for a W"    },    {        "values":[27,34,32,0,26,23,27,],        "text": "Separate Bike L"    },    {        "values":[27,30,29,26,0,22,25,],        "text": "Real-Time Bus A"    },    {        "values":[23,32,27,23,22,0,22,],        "text": "Planting trees "    },    {        "values":[23,33,29,27,25,22,0,],        "text": "Little (book ex"    },]},
                    "intro": {"project_name": "Fire Hydrant Markers", "round_number": "6", "description": "Install high-visibility markers on fire hydrants around town to increase safety for all residents and reduce response time of the fire department by improving ease of locating hydrants in emergencies, at night, and in the snow.", "project_cost" : "8000", "budget_remaining" : "353000.0", "effective_vote_count" : "38.0", "project_votes" : "38" },
                },
            
                "21": {
                    "effective_vote_count_bar_chart": {"x_labels": ['Upgraded Water ','New Chairs for ','Protect the Hea','5 Water Bottle ','Outdoor Fitness','Planting trees ','Invention and P','Digital Sign at','Inclusive Playg','24H public toil','Urban Bicycle W','Meeting Room Up','Volleyball Cour','New Playground ',], "values": [11.0, 13.0, 32.0, 29.037389276309845, 12.193089917753575, 37.0, 13.0, 9.0, 3.0, 9.0, 14.840668302976171, 3.0, 9.0, 14.0] },
                    "effective_vote_count_stacked_bar_chart": {"x_labels": ['Upgraded Water ','New Chairs for ','Protect the Hea','5 Water Bottle ','Outdoor Fitness','Invention and P','Digital Sign at','Inclusive Playg','24H public toil','Urban Bicycle W','Meeting Room Up','Volleyball Cour','New Playground ',], "initial_values": [ 11.0, 13.0, 32.0, 29.037389276309845, 12.193089917753575, 13.0, 9.0, 3.0, 9.0, 14.840668302976171, 3.0, 9.0, 14.0,], "reduced_values": [0.0, 0.0, 0.0, -3.552713678800501e-15, 0.0, 0.0, 0.0, 0.0, 0.0, -1.7763568394002505e-15, 0.0, 0.0, 0.0] },
                    "pie_chart_triplets": [[{"project_name": "5 Water Bottle Refill Stations","round_name": "Planting trees in the city","title":  "'5 Water Bottle ' Voters'","values_1": [22],"text_1":  "'Planting trees ' Voters","values_2": [14] ,"text_2": "Non 'Planting trees ' Voters"},{"project_name": "Outdoor Fitness Equipment in the public park","round_name": "Planting trees in the city","title":  "'Outdoor Fitness' Voters'","values_1": [20],"text_1":  "'Planting trees ' Voters","values_2": [13] ,"text_2": "Non 'Planting trees ' Voters"},{"project_name": "Protect the Health and Safety of our Firefighters","round_name": "Planting trees in the city","title":  "'Protect the Hea' Voters'","values_1": [18],"text_1":  "'Planting trees ' Voters","values_2": [14] ,"text_2": "Non 'Planting trees ' Voters"},], [{"project_name": "Urban Bicycle Wash Stations","round_name": "Planting trees in the city","title":  "'Urban Bicycle W' Voters'","values_1": [12],"text_1":  "'Planting trees ' Voters","values_2": [9] ,"text_2": "Non 'Planting trees ' Voters"},{"project_name": "New Chairs for Public Schools","round_name": "Planting trees in the city","title":  "'New Chairs for ' Voters'","values_1": [7],"text_1":  "'Planting trees ' Voters","values_2": [6] ,"text_2": "Non 'Planting trees ' Voters"},{"project_name": "Invention and Production of Music","round_name": "Planting trees in the city","title":  "'Invention and P' Voters'","values_1": [7],"text_1":  "'Planting trees ' Voters","values_2": [6] ,"text_2": "Non 'Planting trees ' Voters"},], [{"project_name": "Volleyball Court in the public park","round_name": "Planting trees in the city","title":  "'Volleyball Cour' Voters'","values_1": [4],"text_1":  "'Planting trees ' Voters","values_2": [5] ,"text_2": "Non 'Planting trees ' Voters"},{"project_name": "Digital Sign at City Hall in Multiple Languages","round_name": "Planting trees in the city","title":  "'Digital Sign at' Voters'","values_1": [3],"text_1":  "'Planting trees ' Voters","values_2": [6] ,"text_2": "Non 'Planting trees ' Voters"},{"project_name": "New Playground for public school","round_name": "Planting trees in the city","title":  "'New Playground ' Voters'","values_1": [3],"text_1":  "'Planting trees ' Voters","values_2": [11] ,"text_2": "Non 'Planting trees ' Voters"},], [{"project_name": "Meeting Room Upgrade for libraries","round_name": "Planting trees in the city","title":  "'Meeting Room Up' Voters'","values_1": [2],"text_1":  "'Planting trees ' Voters","values_2": [1] ,"text_2": "Non 'Planting trees ' Voters"},{"project_name": "Upgraded Water Fountains for Public Schools","round_name": "Planting trees in the city","title":  "'Upgraded Water ' Voters'","values_1": [2],"text_1":  "'Planting trees ' Voters","values_2": [9] ,"text_2": "Non 'Planting trees ' Voters"},{"project_name": "24H public toilet","round_name": "Planting trees in the city","title":  "'24H public toil' Voters'","values_1": [2],"text_1":  "'Planting trees ' Voters","values_2": [7] ,"text_2": "Non 'Planting trees ' Voters"},], [{"project_name": "Inclusive Playground for All Kids","round_name": "Planting trees in the city","title":  "'Inclusive Playg' Voters'","values_1": [1],"text_1":  "'Planting trees ' Voters","values_2": [2] ,"text_2": "Non 'Planting trees ' Voters"},], ],
                    "sankey_chart": {"rows": [['Planting trees ', 'Computers for t', 32],['Planting trees ', 'Benches for a W', 27],['Planting trees ', 'Fire Hydrant Ma', 23],['Planting trees ', 'Separate Bike L', 23],['Planting trees ', '5 Water Bottle ', 22],['Planting trees ', 'Real-Time Bus A', 22],['Planting trees ', 'Other', 103],]},
                    "chord_chart": {"series": [        {        "values":[0,32,27,23,23,22,22,0,],        "text": "Planting trees "    },    {        "values":[32,0,35,31,34,29,30,],        "text": "Computers for t"    },    {        "values":[27,35,0,29,32,25,29,],        "text": "Benches for a W"    },    {        "values":[23,31,29,0,27,20,27,],        "text": "Fire Hydrant Ma"    },    {        "values":[23,34,32,27,0,23,26,],        "text": "Separate Bike L"    },    {        "values":[22,29,25,20,23,0,24,],        "text": "5 Water Bottle "    },    {        "values":[22,30,29,27,26,24,0,],        "text": "Real-Time Bus A"    },]},
                    "intro": {"project_name": "Planting trees in the city", "round_number": "7", "description": "Street trees cool the city, absorb pollution, & make our neighborhoods more livable! planting 100 new trees & building tree wells in the areas that need them most.", "project_cost" : "119400", "budget_remaining" : "233600.0", "effective_vote_count" : "37.0", "project_votes" : "37" },
                },
            
                "23": {
                    "effective_vote_count_bar_chart": {"x_labels": ['Upgraded Water ','New Chairs for ','Protect the Hea','5 Water Bottle ','Outdoor Fitness','Invention and P','Digital Sign at','Inclusive Playg','24H public toil','Urban Bicycle W','Meeting Room Up','Volleyball Cour','New Playground ',], "values": [11.0, 13.0, 32.0, 29.037389276309845, 12.193089917753575, 13.0, 9.0, 3.0, 9.0, 14.840668302976171, 3.0, 9.0, 14.0] },
                    "effective_vote_count_stacked_bar_chart": {"x_labels": ['Upgraded Water ','New Chairs for ','Outdoor Fitness','Invention and P','Digital Sign at','Inclusive Playg','24H public toil','Urban Bicycle W','Meeting Room Up','Volleyball Cour','New Playground ',], "initial_values": [ 11.0, 13.0, 12.193089917753575, 13.0, 9.0, 3.0, 9.0, 14.840668302976171, 3.0, 9.0, 14.0,], "reduced_values": [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -1.7763568394002505e-15, 0.0, 0.0, 0.0] },
                    "pie_chart_triplets": [[{"project_name": "Outdoor Fitness Equipment in the public park","round_name": "5 Water Bottle Refill Stations","title":  "'Outdoor Fitness' Voters'","values_1": [23],"text_1":  "'5 Water Bottle ' Voters","values_2": [10] ,"text_2": "Non '5 Water Bottle ' Voters"},{"project_name": "Protect the Health and Safety of our Firefighters","round_name": "5 Water Bottle Refill Stations","title":  "'Protect the Hea' Voters'","values_1": [17],"text_1":  "'5 Water Bottle ' Voters","values_2": [15] ,"text_2": "Non '5 Water Bottle ' Voters"},{"project_name": "Urban Bicycle Wash Stations","round_name": "5 Water Bottle Refill Stations","title":  "'Urban Bicycle W' Voters'","values_1": [11],"text_1":  "'5 Water Bottle ' Voters","values_2": [10] ,"text_2": "Non '5 Water Bottle ' Voters"},], [{"project_name": "New Playground for public school","round_name": "5 Water Bottle Refill Stations","title":  "'New Playground ' Voters'","values_1": [9],"text_1":  "'5 Water Bottle ' Voters","values_2": [5] ,"text_2": "Non '5 Water Bottle ' Voters"},{"project_name": "Upgraded Water Fountains for Public Schools","round_name": "5 Water Bottle Refill Stations","title":  "'Upgraded Water ' Voters'","values_1": [7],"text_1":  "'5 Water Bottle ' Voters","values_2": [4] ,"text_2": "Non '5 Water Bottle ' Voters"},{"project_name": "Invention and Production of Music","round_name": "5 Water Bottle Refill Stations","title":  "'Invention and P' Voters'","values_1": [5],"text_1":  "'5 Water Bottle ' Voters","values_2": [8] ,"text_2": "Non '5 Water Bottle ' Voters"},], [{"project_name": "Volleyball Court in the public park","round_name": "5 Water Bottle Refill Stations","title":  "'Volleyball Cour' Voters'","values_1": [5],"text_1":  "'5 Water Bottle ' Voters","values_2": [4] ,"text_2": "Non '5 Water Bottle ' Voters"},{"project_name": "New Chairs for Public Schools","round_name": "5 Water Bottle Refill Stations","title":  "'New Chairs for ' Voters'","values_1": [4],"text_1":  "'5 Water Bottle ' Voters","values_2": [9] ,"text_2": "Non '5 Water Bottle ' Voters"},{"project_name": "Digital Sign at City Hall in Multiple Languages","round_name": "5 Water Bottle Refill Stations","title":  "'Digital Sign at' Voters'","values_1": [4],"text_1":  "'5 Water Bottle ' Voters","values_2": [5] ,"text_2": "Non '5 Water Bottle ' Voters"},], [{"project_name": "Inclusive Playground for All Kids","round_name": "5 Water Bottle Refill Stations","title":  "'Inclusive Playg' Voters'","values_1": [1],"text_1":  "'5 Water Bottle ' Voters","values_2": [2] ,"text_2": "Non '5 Water Bottle ' Voters"},{"project_name": "Meeting Room Upgrade for libraries","round_name": "5 Water Bottle Refill Stations","title":  "'Meeting Room Up' Voters'","values_1": [1],"text_1":  "'5 Water Bottle ' Voters","values_2": [2] ,"text_2": "Non '5 Water Bottle ' Voters"},{"project_name": "24H public toilet","round_name": "5 Water Bottle Refill Stations","title":  "'24H public toil' Voters'","values_1": [0],"text_1":  "'5 Water Bottle ' Voters","values_2": [9] ,"text_2": "Non '5 Water Bottle ' Voters"},], ],
                    "sankey_chart": {"rows": [['5 Water Bottle ', 'Computers for t', 29],['5 Water Bottle ', 'Benches for a W', 25],['5 Water Bottle ', 'Little (book ex', 25],['5 Water Bottle ', 'Real-Time Bus A', 24],['5 Water Bottle ', 'Separate Bike L', 23],['5 Water Bottle ', 'Outdoor Fitness', 23],['5 Water Bottle ', 'Other', 106],]},
                    "chord_chart": {"series": [        {        "values":[0,29,25,25,24,23,23,0,],        "text": "5 Water Bottle "    },    {        "values":[29,0,35,33,30,34,26,],        "text": "Computers for t"    },    {        "values":[25,35,0,29,29,32,24,],        "text": "Benches for a W"    },    {        "values":[25,33,29,0,25,27,22,],        "text": "Little (book ex"    },    {        "values":[24,30,29,25,0,26,21,],        "text": "Real-Time Bus A"    },    {        "values":[23,34,32,27,26,0,22,],        "text": "Separate Bike L"    },    {        "values":[23,26,24,22,21,22,0,],        "text": "Outdoor Fitness"    },]},
                    "intro": {"project_name": "5 Water Bottle Refill Stations", "round_number": "8", "description": "At a water bottle refill station you get a healthy drink for free.", "project_cost" : "40000", "budget_remaining" : "193600.0", "effective_vote_count" : "29.037389276309845", "project_votes" : "36" },
                },
            
                "15": {
                    "effective_vote_count_bar_chart": {"x_labels": ['Upgraded Water ','New Chairs for ','Outdoor Fitness','Invention and P','Digital Sign at','Inclusive Playg','24H public toil','Urban Bicycle W','Meeting Room Up','Volleyball Cour','New Playground ',], "values": [11.0, 13.0, 12.193089917753575, 13.0, 9.0, 3.0, 9.0, 14.840668302976171, 3.0, 9.0, 14.0] },
                    "effective_vote_count_stacked_bar_chart": {"x_labels": ['Upgraded Water ','New Chairs for ','Outdoor Fitness','Invention and P','Digital Sign at','Inclusive Playg','24H public toil','Urban Bicycle W','Meeting Room Up','Volleyball Cour','New Playground ',], "initial_values": [ 11.0, 13.0, 12.193089917753575, 13.0, 9.0, 3.0, 9.0, 14.840668302976171, 3.0, 9.0, 14.0,], "reduced_values": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] },
                    "pie_chart_triplets": [[{"project_name": "Outdoor Fitness Equipment in the public park","round_name": "Urban Bicycle Wash Stations","title":  "'Outdoor Fitness' Voters'","values_1": [11],"text_1":  "'Urban Bicycle W' Voters","values_2": [22] ,"text_2": "Non 'Urban Bicycle W' Voters"},{"project_name": "Protect the Health and Safety of our Firefighters","round_name": "Urban Bicycle Wash Stations","title":  "'Protect the Hea' Voters'","values_1": [9],"text_1":  "'Urban Bicycle W' Voters","values_2": [23] ,"text_2": "Non 'Urban Bicycle W' Voters"},{"project_name": "Digital Sign at City Hall in Multiple Languages","round_name": "Urban Bicycle Wash Stations","title":  "'Digital Sign at' Voters'","values_1": [7],"text_1":  "'Urban Bicycle W' Voters","values_2": [2] ,"text_2": "Non 'Urban Bicycle W' Voters"},], [{"project_name": "Invention and Production of Music","round_name": "Urban Bicycle Wash Stations","title":  "'Invention and P' Voters'","values_1": [5],"text_1":  "'Urban Bicycle W' Voters","values_2": [8] ,"text_2": "Non 'Urban Bicycle W' Voters"},{"project_name": "Volleyball Court in the public park","round_name": "Urban Bicycle Wash Stations","title":  "'Volleyball Cour' Voters'","values_1": [5],"text_1":  "'Urban Bicycle W' Voters","values_2": [4] ,"text_2": "Non 'Urban Bicycle W' Voters"},{"project_name": "New Chairs for Public Schools","round_name": "Urban Bicycle Wash Stations","title":  "'New Chairs for ' Voters'","values_1": [2],"text_1":  "'Urban Bicycle W' Voters","values_2": [11] ,"text_2": "Non 'Urban Bicycle W' Voters"},], [{"project_name": "Meeting Room Upgrade for libraries","round_name": "Urban Bicycle Wash Stations","title":  "'Meeting Room Up' Voters'","values_1": [2],"text_1":  "'Urban Bicycle W' Voters","values_2": [1] ,"text_2": "Non 'Urban Bicycle W' Voters"},{"project_name": "New Playground for public school","round_name": "Urban Bicycle Wash Stations","title":  "'New Playground ' Voters'","values_1": [2],"text_1":  "'Urban Bicycle W' Voters","values_2": [12] ,"text_2": "Non 'Urban Bicycle W' Voters"},{"project_name": "24H public toilet","round_name": "Urban Bicycle Wash Stations","title":  "'24H public toil' Voters'","values_1": [2],"text_1":  "'Urban Bicycle W' Voters","values_2": [7] ,"text_2": "Non 'Urban Bicycle W' Voters"},], [{"project_name": "Inclusive Playground for All Kids","round_name": "Urban Bicycle Wash Stations","title":  "'Inclusive Playg' Voters'","values_1": [1],"text_1":  "'Urban Bicycle W' Voters","values_2": [2] ,"text_2": "Non 'Urban Bicycle W' Voters"},{"project_name": "Upgraded Water Fountains for Public Schools","round_name": "Urban Bicycle Wash Stations","title":  "'Upgraded Water ' Voters'","values_1": [1],"text_1":  "'Urban Bicycle W' Voters","values_2": [10] ,"text_2": "Non 'Urban Bicycle W' Voters"},], ],
                    "sankey_chart": {"rows": [['Urban Bicycle W', 'Computers for t', 15],['Urban Bicycle W', 'Benches for a W', 14],['Urban Bicycle W', 'Fire Hydrant Ma', 14],['Urban Bicycle W', 'Separate Bike L', 14],['Urban Bicycle W', 'Real-Time Bus A', 13],['Urban Bicycle W', 'Little (book ex', 13],['Urban Bicycle W', 'Other', 70],]},
                    "chord_chart": {"series": [        {        "values":[0,15,14,14,14,13,13,0,],        "text": "Urban Bicycle W"    },    {        "values":[15,0,35,31,34,30,33,],        "text": "Computers for t"    },    {        "values":[14,35,0,29,32,29,29,],        "text": "Benches for a W"    },    {        "values":[14,31,29,0,27,27,23,],        "text": "Fire Hydrant Ma"    },    {        "values":[14,34,32,27,0,26,27,],        "text": "Separate Bike L"    },    {        "values":[13,30,29,27,26,0,25,],        "text": "Real-Time Bus A"    },    {        "values":[13,33,29,23,27,25,0,],        "text": "Little (book ex"    },]},
                    "intro": {"project_name": "Urban Bicycle Wash Stations", "round_number": "9", "description": "Bicycle owners need to clean and care for their bikes, ideally monthly. But for apartment dwellers, this is really hard! These centrally located bicycle wash stations would allow bicycle owners to wash off dirt, grime, and salt from their bikes.", "project_cost" : "20000", "budget_remaining" : "173600.0", "effective_vote_count" : "14.840668302976171", "project_votes" : "21" },
                },
            }

    </script>
    <script>
        function updateBarChart(x_labels, values) {
            let args = {
                "data":{
                    "scale-x":{
                    "labels": x_labels,
                    },
                    "series":[{"values": values}],
                }
            }
            zingchart.exec('BarChart', 'modify', args);
        }

        function updateStackedBarChart(x_labels, initial_values, reduced_values) {
            let args = {
                "data":{
                "scale-x":{
                    "labels": x_labels,
                },
                "series":[
                    {
                        "text": "Current Votes",
                        "values": initial_values,
                    },
                    {
                        "text": "Previous Votes",
                        "values": reduced_values
                    }
                ]
                }
            };
            zingchart.exec('StackedBarChart', 'modify', args);   
        }

        function renderChordChart(id) {
            zingchart.render({
                id: "ChordChart",
                data: {
                    "type": "chord",
                    "options": {
                        "radius": "80%"
                    },
                    "plotarea": {
                        "margin": "dynamic"
                    },
                    "series": rounds_data[id].chord_chart.series,
                
                },
                height: "60%",
                width: "100%",
            });
        }

        function updateSankeyChart(rows) {
            let chart = new google.visualization.Sankey(document.getElementById('SankeyChart'));
            let options = {
                title: 'Project Vote Sankey Diagram',
                width: 445,
                height: 280,
                sankey: {}
            };
            let data = new google.visualization.DataTable();
            data.addColumn('string', 'From');
            data.addColumn('string', 'To');
            data.addColumn('number', 'Weight');
            data.addRows(rows);
            // Instantiates and draws our chart, passing in some options.
            chart.draw(data, options);
        }

        function updateIntro(project) {

            var elements = document.getElementsByClassName("project_name");
            for (var i = 0; i < elements.length; i++) {
                elements[i].innerHTML = project.project_name;
            }
            var elements = document.getElementsByClassName("round_number");
            for (var i = 0; i < elements.length; i++) {
                elements[i].innerHTML = project.round_number;
            }
            var elements = document.getElementsByClassName("description");
            for (var i = 0; i < elements.length; i++) {
                elements[i].innerHTML = project.description;
            }
            var elements = document.getElementsByClassName("project_cost");
            for (var i = 0; i < elements.length; i++) {
                elements[i].innerHTML = project.project_cost;
            }
            var elements = document.getElementsByClassName("budget_remaining");
            for (var i = 0; i < elements.length; i++) {
                elements[i].innerHTML = project.budget_remaining;
            }
        
            var elements = document.getElementsByClassName("effective_vote_count");
            for (var i = 0; i < elements.length; i++) {
                elements[i].innerHTML = project.effective_vote_count;
            }
            var elements = document.getElementsByClassName("project_votes");
            for (var i = 0; i < elements.length; i++) {
                elements[i].innerHTML = project.project_votes;
            }
        }
           

        function renderPieChart(id, title, values_1, text_1, values_2, text_2) {
            let args = {
                "type":"pie",
                "title":{
                    "text": title
                },
                "legend":{
                    "toggle-action":"remove",
                    "toggle-action":"remove",
                    "layout":"x2",
                    "align":"center",
                    "vertical-align":"bottom"
                },
                "plot":{
                    "valueBox":{
                        "visible":true,
                        "type":"all",
                        "placement":"in",
                        "text":"%v",
                        "fontSize":10 // Adjust font size as needed
                    },
                    "animation":{
                        "effect":"ANIMATION_EXPAND_VERTICAL",
                        "sequence":"ANIMATION_BY_PLOT",
                        "speed":0
                    }
                },
                "series":[
                    {
                        "values": values_1,
                        "text": text_1
                    },
                    {
                        "values": values_2,
                        "text": text_2
                    }
                ]
            };
            zingchart.render({
                id: id,
                data: args,
                height: 300,
                width: "100%"
            });
        }

        async function addPieChartsToCarousel(pie_chart_triplets) {
            pie_chart_data_for_render = [];
            let carouselElement = document.getElementById("pieChartsCarousel");
            carouselElement.innerHTML = "";
            let carouselNum = 0;
            pie_chart_triplets.forEach(triplet => {
                let carouselClass = "carousel-item";
                if (carouselNum === 0) {
                    carouselClass = "carousel-item active";
                }
                let carouselItem = document.createElement("div");
                carouselItem.className = carouselClass;
                let wrapper = document.createElement("div");
                wrapper.className = "wrapper";
                let container = document.createElement("div");
                container.className = "container";
                let row = document.createElement("div");
                row.className = "row";
                triplet.forEach(data => {
                    let col = document.createElement("div");
                    col.className = "col-sm-4";
                    let div = document.createElement("div");
                    let pieChart = document.createElement("div");
                    pieChart.id = "PieChart" + carouselNum + "-" + triplet.indexOf(data);
                    pieChart.style.height = "100%";
                    pieChart.style.width = "100%";
                    div.appendChild(pieChart);
                    pie_chart_data_for_render.push([pieChart.id, data.title, data.values_1, data.text_1, data.values_2, data.text_2])
                    // renderPieChart(pieChart.id, data.title, data.values_1, data.text_1, data.values_2, data.text_2);
                    col.appendChild(div);
                    let pieChartText = document.createElement("div");
                    pieChartText.className = "pie-chart-text";
                    pieChartText.innerHTML = "This resulted in an average reduction of $ per voter for the '" + data.project_name + "' voters who also voted for '" + data.round_name + "'.";
                    col.appendChild(pieChartText);
                    row.appendChild(col);
                });
                container.appendChild(row);
                wrapper.appendChild(container);
                carouselItem.appendChild(wrapper);
                carouselElement.appendChild(carouselItem);
                carouselNum++;
            });
            return pie_chart_data_for_render;
        }

        async function renderRound(roundId) {
            let element = document.getElementById("dropdown-item-".concat(roundId));
            var dropdownItems = document.querySelectorAll('.dropdown-item');
            dropdownItems.forEach(item => item.classList.remove('active'));
            element.classList.add('active');
            document.getElementById('projectDropdown').innerText = element.innerText;
            let round_data = rounds_data[roundId];
            pie_chart_data_for_render = await addPieChartsToCarousel(round_data.pie_chart_triplets);
            updateBarChart(round_data.effective_vote_count_bar_chart.x_labels, round_data.effective_vote_count_bar_chart.values);
            updateStackedBarChart(round_data.effective_vote_count_stacked_bar_chart.x_labels, round_data.effective_vote_count_stacked_bar_chart.initial_values, round_data.effective_vote_count_stacked_bar_chart.reduced_values);
            updateSankeyChart(round_data.sankey_chart.rows);
            updateIntro(round_data.intro)
            // renderChordChart(round_data.chord_chart.series);
            pie_chart_data_for_render.forEach(data => {
                renderPieChart(data[0], data[1], data[2], data[3], data[4], data[5]);
            });

        }
    </script>
    <script>
        async function loadRound() {
            const urlParams = new URLSearchParams(window.location.search);
            projectId = urlParams.get('projectId');
            if (projectId === null) {
                projectId = "3";
            }
            await google.charts.load('current', {
                'packages': ['sankey']
            });
            // Display the round requested
            renderRound(projectId);
            renderChordChart(projectId);
            document.getElementById("spinner").style.display = "none";
            // Display the dropdown
            document.getElementById("dropdown-container").classList.add('active');
            document.getElementById("dropdown-container").style.display = 'flex';
        }
    </script>
    <script src="https://unpkg.com/@popperjs/core@2"></script>
    <script src="https://unpkg.com/tippy.js@6"></script>
    <script>tippy('[data-tippy-content]', { allowHTML: true, maxWidth: 1000});</script>
    <script type="text/javascript" src="https://unpkg.com/default-passive-events"></script>
</body>
</html>